"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[23655],{80302:function(e,t,n){n.d(t,{O:function(){return d}});n(12419);var i=n(6610),r=n(10379),o=n(46070),a=n(77608),l=n(5535),s=n(91264);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,a.Z)(e);if(t){var r=(0,a.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,o.Z)(this,n)}}var d=function(e){(0,r.Z)(n,e);var t=u(n);function n(e){return(0,i.Z)(this,n),t.call(this,e,s.oy.Classifieds.Poll2Constants.Category)}return n}(l.g)},23655:function(e,t,n){n.d(t,{W:function(){return w}});var i=n(67294),r=n(65647),o=n(11042),a=n(28791),l=n(57094),s=n(66012),u=n(83404),d=n(91264),c=n(94825),f=n(2392),v=n(41258),m=n(86784),g=n(10898),p=n(48407),y=n(52513),h=n(63393),I=n(70375);function S(e){var t=(0,s.FY)(g.cmOwnUser,(function(){return g.cmOwnUser.currency()})),n=(0,u.t)(e.listingId,(function(e){var n,i,r=e.data();return{loaded:e.loaded(),activeOfferings:e.activeOfferings(),reviewScore:null===r||void 0===r?void 0:r.ReviewScore,reviewCount:null===r||void 0===r?void 0:r.ReviewCount,showReviewCount:!0,primaryThumbnailSrcSet:e.primaryThumbnailSrcSet(),gameBrand:null===(n=e.gameData())||void 0===n?void 0:n.GameBrand,priceString:e.priceString(t),advertiserId:null===(i=e.data())||void 0===i?void 0:i.AdvertiserId}}),[t]),S=m.S.inPortal();return i.createElement(h.k,{listingId:e.listingId,contextMenuProps:{trigger:[I.mr.ContextMenu],customTrigger:i.createElement(v.oO,{loaded:n.loaded,toView:{id:d.IH.Routing.ArenaViewIds.ClassifiedListing,params:{listingId:e.listingId}},thumbnailSrcSet:n.primaryThumbnailSrcSet,upperDetails:i.createElement(y.bZ,{marginBottom:y.mx.XSmall},i.createElement(l.W,{listingId:e.listingId})),name:i.createElement(f.R,{listingId:e.listingId,nameProps:{fontSize:S?{Default:r.ki.Medium,Mobile:r.ki.Base}:r.ki.Base,fontWeight:S?r.Fh.Bold:null}}),img:i.createElement(p.e,{advertiserId:n.advertiserId,imgProps:{size:v.b1}}),lowerDetails:n.priceString,type:e.type,gameBrand:n.gameBrand},i.createElement(c.f,{listingId:e.listingId,reviewStarsProps:{iconSize:S?{Default:o.Tg.Base,Mobile:o.Tg.Small}:o.Tg.Small,showScore:!0,scoreFontSize:S?{Default:r.ki.Medium,Mobile:r.ki.Base}:r.ki.Base,reviewCountFontSize:S?{Default:r.ki.Base,Mobile:r.ki.Small}:r.ki.XSmall,showReviewCount:!0,gutter:a.Yz.Small}}))}})}var w=i.memo(S)},57094:function(e,t,n){n.d(t,{W:function(){return a}});n(82526),n(41817);var i=n(67294),r=n(91908),o=n(83404),a=i.memo((function(e){var t=(0,o.t)(e.listingId,(function(e){var t,n,i=e.category();return{name:null===i||void 0===i||null===(t=i.data())||void 0===t?void 0:t.Name,description:null===i||void 0===i||null===(n=i.data())||void 0===n?void 0:n.Description}}));return i.createElement(r.os,{size:e.size,brand:r.$k.Caster,bordered:!0,text:t.name,tooltip:t.description})}))},63393:function(e,t,n){n.d(t,{k:function(){return y}});n(65069);var i=n(67294),r=n(83404),o=n(26435),a=n(59924),l=n(37109),s=n(75026),u=n(61555),d=n(30621),c=n(60185),f=n(91264),v=n(78232),m=n(23415),g=n(23350);function p(e){var t,n,p,y,h,I,S,w,b,C,k=(0,r.t)(e.listingId,(function(e){var t,n=e.data();return{data:n,title:null===n||void 0===n||null===(t=n.Info)||void 0===t?void 0:t.Title,loaded:e.loaded(),state:null===n||void 0===n?void 0:n.State,mayEdit:e.mayEdit(),isOwn:e.isOwn(),advertiserId:null===n||void 0===n?void 0:n.AdvertiserId}}));return k.loaded?i.createElement(o.N,{baseProps:e.contextMenuProps},i.createElement(a.K,{size:null===(t=e.contextMenuProps)||void 0===t?void 0:t.size},i.createElement(s.E,{onClick:function(){return(0,l.w)({title:k.title,text:"Check out ".concat(k.title," on Challengermode!"),url:c.$.reverse(f.IH.Routing.ArenaViewIds.ClassifiedListing,{listingId:e.listingId})})},text:"Share",iconType:u.y.Share,size:null===(n=e.contextMenuProps)||void 0===n?void 0:n.size}),i.createElement(s.E,{toView:d.Y.listingToView(e.listingId),text:"Go to listing",iconType:u.y.Marketplace,size:null===(p=e.contextMenuProps)||void 0===p?void 0:p.size}),i.createElement(s.E,{toView:{id:f.IH.Routing.ArenaViewIds.ClassifiedAdvertiser,params:{advertiserId:k.advertiserId}},text:"Go to seller profile",iconType:u.y.User,size:null===(y=e.contextMenuProps)||void 0===y?void 0:y.size})),i.createElement(a.K,{size:null===(h=e.contextMenuProps)||void 0===h?void 0:h.size,separator:!0},i.createElement(s.E,{href:g.b.helpMarketplaceHref,text:"Help Center",iconType:u.y.CustomerService,size:null===(I=e.contextMenuProps)||void 0===I?void 0:I.size})),k.mayEdit&&i.createElement(a.K,{size:null===(S=e.contextMenuProps)||void 0===S?void 0:S.size,separator:!0},i.createElement(s.E,{onClick:function(){return d.Y.spawnEditListingModal(e.listingId)},text:"Edit",iconType:u.y.Edit,size:null===(w=e.contextMenuProps)||void 0===w?void 0:w.size}),k.state===f.l3.ClassifiedState.Published&&i.createElement(s.E,{onClick:function(){return(0,m.W)({onClick:function(){return d.Y.unpublishListing(e.listingId)},confirmTitle:"Unpublish listing",confirmMessage:k.isOwn?"If you unpublish the listing you need to submit it for review again if you want to publish it.":"If you unpublish the listing it will not be shown on Challengermode anymore. The seller has to submit it for review again.",confirmButtonText:"Unpublish",confirmBrand:v.wc.Warning})},text:"Unpublish",iconType:u.y.Stop,size:null===(b=e.contextMenuProps)||void 0===b?void 0:b.size}),k.state!==f.l3.ClassifiedState.Removed&&i.createElement(s.E,{onClick:function(){return(0,m.W)({onClick:function(){return d.Y.removeListing(e.listingId)},confirmTitle:"Delete listing",confirmMessage:"Are you sure you want to delete the listing?",confirmBrand:v.wc.Danger,confirmButtonText:"Delete"})},text:"Delete",iconType:u.y.Delete,size:null===(C=e.contextMenuProps)||void 0===C?void 0:C.size}))):null}var y=i.memo(p)},2392:function(e,t,n){n.d(t,{R:function(){return c}});var i=n(67294),r=n(83404),o=n(20383),a=n(91264),l=(n(19601),n(82526),n(41817),n(91908));function s(e){var t,n,o,s=(0,r.t)(e.listingId,(function(e){var t;return{loaded:e.loaded(),state:null===(t=e.data())||void 0===t?void 0:t.State}})),u=function(){switch(s.state){case a.l3.ClassifiedState.New:case a.l3.ClassifiedState.Unpublished:return{text:"Unpublished",description:"The listing is Unpublished. It needs approval to be published.",badgeBrand:l.$k.Warning};case a.l3.ClassifiedState.PendingPublication:return{text:"Pending",description:"The listing is pending for publication.",badgeBrand:l.$k.Warning};case a.l3.ClassifiedState.Published:return null;case a.l3.ClassifiedState.Removed:return{text:"Removed",description:"The listing was removed.",badgeBrand:l.$k.Danger};default:return null}};return s.loaded&&u()?i.createElement(l.os,Object.assign({},e.badgeprops,{text:null===(t=u())||void 0===t?void 0:t.text,brand:null===(n=u())||void 0===n?void 0:n.badgeBrand,tooltip:null===(o=u())||void 0===o?void 0:o.description})):null}var u=i.memo(s);function d(e){var t,n=(0,r.t)(e.listingId,(function(e){var t,n;return{loaded:e.loaded(),title:null===(t=e.data())||void 0===t||null===(n=t.Info)||void 0===n?void 0:n.Title}}));return i.createElement(o.D,{loaded:n.loaded,text:n.title,toView:{id:a.IH.Routing.ArenaViewIds.ClassifiedListing,params:{listingId:e.listingId}},baseProps:e.nameProps},i.createElement(u,{listingId:e.listingId,badgeprops:{size:(null===(t=e.nameProps)||void 0===t?void 0:t.badgeSize)||l.$B.Small}}))}var c=i.memo(d)},94825:function(e,t,n){n.d(t,{f:function(){return l}});n(19601);var i=n(67294),r=n(83404),o=n(73473);function a(e){var t=(0,r.t)(e.listingId,(function(e){var t=e.data();return{loaded:e.loaded(),reviewScore:null===t||void 0===t?void 0:t.ReviewScore,reviewCount:null===t||void 0===t?void 0:t.ReviewCount}}));return t.loaded?i.createElement(o.a,Object.assign({score:t.reviewScore,reviewCount:t.reviewCount},e.reviewStarsProps)):null}var l=i.memo(a)},83404:function(e,t,n){n.d(t,{t:function(){return k}});n(12419);var i=n(6610),r=n(5991),o=n(10379),a=n(46070),l=n(77608),s=(n(57327),n(21249),n(2707),n(5535)),u=n(91264),d=n(35856),c=n(30621),f=n(10898),v=n(7876),m=n(86805),g=n(80302),p=n(69241),y=n(57432),h=n(71578),I=n(66012),S=n(52476),w=n(69747);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.Z)(e);if(t){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,a.Z)(this,n)}}var C=function(e){(0,o.Z)(n,e);var t=b(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this,null,u.oy.Classifieds.Poll2Constants.ClassifiedListing))._scope.subscribeVoid(S.Cu),e._offeringsProxy=new d.n(e._scope,(function(){return e.loaded()}),u.oy.Classifieds.Poll2Constants.Offering,(function(){return e.data().OfferingIds})),e._lazyGameInfo=new v.g(e._scope),e._category=new g.O(e._scope),e._advertiser=new p.M(e._scope),e._adapter.addDataCallback((function(t){e._offeringsProxy.update(),e._category.initById(t.CategoryId),e._advertiser.initById(t.AdvertiserId),t.Info.GameId&&e._lazyGameInfo.initByUrn(new m.Urn(u.oy.GameInfo.Poll2Constants.GameInfoDynamic,t.Info.GameId))})),e}return(0,r.Z)(n,[{key:"isOwn",value:function(){var e;return(null===(e=this.advertiser().data())||void 0===e?void 0:e.AdvertiserKey.OwnerId)===w._.ownUserId()}},{key:"offerings",value:function(){return this._offeringsProxy.objects()}},{key:"category",value:function(){return this._category}},{key:"advertiser",value:function(){return this._advertiser}},{key:"activeOfferings",value:function(){return this._offeringsProxy.objects().filter((function(e){return e.IsActive}))}},{key:"thumbnailUrls",value:function(e,t){var n,i;return null!==(n=null===(i=this.data())||void 0===i?void 0:i.Photos.map((function(n){return c.Y.thumbnailUrl(e,t,n.ImageId)})))&&void 0!==n?n:[]}},{key:"thumbnailSrcSets",value:function(){var e,t;return null!==(e=null===(t=this.data())||void 0===t?void 0:t.Photos.map((function(e){return c.Y.thumbnailSrcSet(e.ImageId)})))&&void 0!==e?e:[]}},{key:"primaryThumbnailUrl",value:function(e,t){return this.thumbnailUrls(e,t)[0]}},{key:"primaryThumbnailSrcSet",value:function(){return this.thumbnailSrcSets()[0]}},{key:"mayEdit",value:function(){return f.cmOwnUser.may(u.Sf.Permission.Classified_EditListing)||this.isOwn()}},{key:"gameLoaded",value:function(){var e;return null===(e=this._lazyGameInfo.adapter())||void 0===e?void 0:e.isLoaded()}},{key:"gameData",value:function(){var e;return null===(e=this._lazyGameInfo.adapter())||void 0===e?void 0:e.data()}},{key:"priceString",value:function(e){if((0,h.tQ)(this.activeOfferings()))return"No price specified";var t=this.activeOfferings().sort((function(e,t){return e.Info.PriceTokens-t.Info.PriceTokens}));return 1===t.length||t[0].Info.PriceTokens===t[t.length-1].Info.PriceTokens?"".concat(y.N.moneyString({tokenCount:t[0].Info.PriceTokens,currency:e,currencySign:!0})):"Starting at ".concat(y.N.moneyString({tokenCount:t[0].Info.PriceTokens,currency:e,currencySign:!0}))}}]),n}(s.g);function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0,I.$$)(e,u.oy.Classifieds.Poll2Constants.ClassifiedListing,C,t,n)}},73473:function(e,t,n){n.d(t,{a:function(){return c}});var i=n(28481),r=(n(21249),n(67294)),o=n(28791),a=n(71578),l=n(11042),s=n(61555),u=n(65647),d=n(52513),c=r.memo((function(e){var t=r.useState(e.score),n=(0,i.Z)(t,2),c=n[0],f=n[1];r.useEffect((function(){f(e.score)}),[e.score]);var v=function(t){e.onClick&&f(t)};return r.createElement(o.sf,{alignItems:o.W6.Center,gutter:e.gutter||o.Yz.Small},r.createElement(o.sf,{flex:o.Gr.None,alignItems:o.W6.Center},(0,a.z4)(5).map((function(t){return r.createElement(o.sf,{key:t,flex:o.Gr.None,cursor:e.onClick&&d.J7.Pointer,onClick:function(){return n=t+1,void(e.onClick&&(e.score===n&&(n=0),f(n),e.onClick(n)));var n},onMouseEnter:function(){return v(t+1)},onMouseLeave:function(){return v(e.score)}},r.createElement(l.F2,{size:e.iconSize,theme:Math.round(c)>t?l.DS.Filled:l.DS.Outlined,type:Math.floor(c)===t&&c%1>.3&&c%1<1?s.y.StarHalf:s.y.Star,brand:u.Z7.Primary}))}))),e.showScore&&!!c&&r.createElement(o.sf,{flex:o.Gr.None},r.createElement(u.Mo,{size:e.scoreFontSize,brand:u.Z7.White,fontWeight:u.Fh.Bold,text:"".concat((null===c||void 0===c?void 0:c.toFixed(1))||0),lineHeight:u.a5._1em,block:!0})),e.showReviewCount&&e.reviewCount>0&&r.createElement(o.sf,{flex:o.Gr.None},r.createElement(u.Mo,{size:e.reviewCountFontSize,brand:u.Z7.WhiteDark,text:"(".concat(e.reviewCount||0,")"),lineHeight:u.a5._1em,block:!0})))}))}}]);