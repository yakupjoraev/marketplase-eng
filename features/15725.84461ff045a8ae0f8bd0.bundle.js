(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[15725],{15725:function(e,t,n){"use strict";n.d(t,{wv:function(){return _},iD:function(){return S},Wg:function(){return q},gc:function(){return x},e1:function(){return A},oA:function(){return T},Kt:function(){return B},l2:function(){return C}});n(12419);var r=n(92137),a=n(6610),u=n(5991),o=n(10379),i=n(46070),s=n(77608),c=(n(41539),n(88674),n(66992),n(78783),n(33948),n(69826),n(21249),n(57327),n(65069),n(39714),n(24603),n(74916),n(87757)),l=n.n(c),p=n(91264),d=n(40175),g=n(20555),f=n(60185),y=n(39743),m=n(4510),v=n(71578),h=n(9123),b=n(46532),k=n(69747),w=n(24384),P=n(10648);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var _=new(function(e){(0,o.Z)(i,e);var t=I(i);function i(){var e;return(0,a.Z)(this,i),(e=t.call(this))._memberBase="/api/Page/Member/",e._postBase="/api/Page/Post/",e._basePageUrl="/api/Page/Page/",e._pageTypes=[{type:p.kt.PageType.Brand,name:"Page"},{type:p.kt.PageType.Group,name:"Group"}],e._pageRoles=[{type:p.oy.AuxRole.Unknown,name:"Unassigned"},{type:p.oy.AuxRole.CoAdmin,name:"Admin"},{type:p.oy.AuxRole.LiteAdmin,name:"Moderator"},{type:p.oy.AuxRole.Caster,name:"Caster"}],e.setOrder=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.Z.to("".concat(e._memberBase,"Set_Order")).body({PageIds:n}).call({useGlobalErrorHandling:!1});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),e.editPage=function(e){return g.Z.to("/api/Page/Page/Edit").body(e).call()},e.editPageSupport=function(e){return g.Z.to("/api/Page/Page/edit_support").body(e).call()},e._slugAvailableDebounced=(0,v.Ti)(function(){var t=(0,r.Z)(l().mark((function t(n,r,a){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.isSlugAvailable(n);case 2:t.sent?r():a("The slug ".concat(n," is already taken."));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),500,{trailing:!0}),e.slugAvailableValidator=function(){var t=(0,r.Z)(l().mark((function t(n,r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.next=4,new Promise((function(t,n){e._slugAvailableDebounced(r,t,n)}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.spawnCreateSpaceModal=function(){k._.isAuthenticated()?y.tE.open({id:y.qq.Page_Create,component:Promise.all([n.e(84992),n.e(47084)]).then(n.bind(n,52349))}):b.cmAccount.spawnLogInOrRegisterModal({heading:"Log In or Sign Up to create a new Space"})},e.spawnSubscribeModal=function(e){y.tE.open({id:y.qq.Page_Subscribe,component:Promise.all([n.e(15),n.e(97787),n.e(73267),n.e(4094),n.e(18141)]).then(n.bind(n,51369)),params:e})},e.spawnInviteModal=function(e){y.tE.open({id:y.qq.Page_Subscribe,component:Promise.all([n.e(19829),n.e(98600),n.e(15),n.e(83203),n.e(54635),n.e(67872)]).then(n.bind(n,77992)),params:e})},e._pageStartAdapter=new d.Q(e._scope).initByOwnUserId("page_start"),e}return(0,u.Z)(i,[{key:"loaded",value:function(){return this._pageStartAdapter.isLoaded()}},{key:"data",value:function(){return this._pageStartAdapter.getData()}},{key:"ownMember",value:function(e){if(this.loaded()){var t=this.data().Members.find((function(t){return t.PageId===e}));if(void 0!==t)return t}}},{key:"ownPageIds",value:function(){return this.loaded()?this.data().AuxMembers.map((function(e){return e.PageId})):[]}},{key:"ownFollowedPageIds",value:function(){return this.loaded()?this.data().Members.filter((function(e){return e.State===p.kt.MemberState.Active})).map((function(e){return e.PageId})):[]}},{key:"isGlobalPageId",value:function(e){return this.loaded()&&this.data().GlobalPageIds.some((function(t){return t===e}))}},{key:"canFollow",value:function(e){var t=this.ownMember(e);return this.loaded()&&(!t||t.State===p.kt.MemberState.Inactive)&&!this.isGlobalPageId(e)}},{key:"canLeave",value:function(e){var t;return(null===(t=this.ownMember(e))||void 0===t?void 0:t.State)===p.kt.MemberState.Active&&!this.isGlobalPageId(e)}},{key:"isBlocked",value:function(e){var t;return(null===(t=this.ownMember(e))||void 0===t?void 0:t.State)===p.kt.MemberState.Blocked}},{key:"defaultLogoUrl",value:function(){return n(93258)}},{key:"defaultBannerUrl",value:function(){return null}},{key:"bannerUploadTokenUrl",value:function(e){return"/api/Page/Image/RequestUploadToken?imageType=page_banner&ExternalId=".concat(e)}},{key:"logoUploadTokenUrl",value:function(e){return"/api/Page/Image/RequestUploadToken?imageType=page_logo&ExternalId=".concat(e)}},{key:"href",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.IH.Routing.ArenaViewIds.SpaceIndex,n=arguments.length>2?arguments[2]:void 0;return e?f.$.reverse(t,{pageSlug:e},n):null}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.IH.Routing.ArenaViewIds.SpaceIndex;return{id:t,params:{pageId:e}}}},{key:"toManageSpaceView",value:function(e){return m.D.isTablet()?this.toView(e,p.IH.Routing.ArenaViewIds.SpaceSettingsMenu):this.toView(e,p.IH.Routing.ArenaViewIds.SpaceSettingsAbout)}},{key:"create",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.to("".concat(this._basePageUrl,"Create")).body(n).call();case 2:r=e.sent,w.J.trackEvent({category:P.P.Space,name:"Create",id:r}),f.$.browseTo(f.$.reverse(p.IH.Routing.ArenaViewIds.SpaceIndex,{pageSlug:n.Slug})),this.spawnOnboardingModal(r),t();case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toggleFeatured",value:function(e,t){return g.Z.to("".concat(this._basePageUrl,"Feature")).query("pageId",e).query("feature",t.toString()).call()}},{key:"changeAuxMemberRole",value:function(){var e=(0,r.Z)(l().mark((function e(t,n,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("".concat(this._memberBase,"Set_Aux_Member_Role")).query("pageId",t).query("auxMemberId",n).query("role",r.toString()).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"addAuxMember",value:function(e,t,n){return g.Z.to(this._memberBase+"Add_Aux_Member").query("pageId",e).query("userId",t).query("role",n.toString()).call()}},{key:"removeAuxMember",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to(this._memberBase+"Remove_Aux_Member").query("pageId",t).query("auxMemberId",n).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeOwner",value:function(e,t){return g.Z.to("/api/Page/Page/Change_Owner").query("pageId",e).query("otherUserId",t).call()}},{key:"post",value:function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("".concat(this._postBase,"Create")).body(t).call({successMessage:"Your post was published in the news feed."}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editPost",value:function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("".concat(this._postBase,"Edit")).body(t).call({successMessage:"Your post was successfully edited."}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"idExists",value:function(e){return g.Z.to("/api/Page/Page/Exists").query("pageId",e).call()}},{key:"removePost",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to(this._postBase+"Remove").query("pageId",n).query("postId",t).call({successMessage:"The post was removed."}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"enableHero",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("".concat(this._basePageUrl,"enable_hero")).query("pageId",t).query("type",n.toString()).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disableHero",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("".concat(this._basePageUrl,"disable_hero")).query("pageId",t).query("type",n.toString()).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removePage",value:function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("/api/Page/Page/remove").query("pageId",t).call());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"adminSetVisibility",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("/api/page/page/admin_set_visibility").body({PageId:t,Visibility:n}).call());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"adminSetVerified",value:function(e,t){return g.Z.to("/api/page/page/admin_set_verified").query("pageId",e).query("verified",String(Boolean(t))).call()}},{key:"pinPost",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to(this._postBase+"Pin").query("pageId",n).query("postId",t).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unpinPost",value:function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to(this._postBase+"Unpin").query("pageId",n).query("postId",t).call());case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"follow",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return g.Z.to(this._memberBase+"Follow").query("pageId",e).call({useGlobalErrorHandling:t})}},{key:"unfollow",value:function(e,t){return g.Z.to(this._memberBase+"Unfollow").query("memberId",t).call()}},{key:"kick",value:function(e,t){return g.Z.to(this._memberBase+"kick").query("memberId",t).call({infoMessage:"The user was kicked from this Space."})}},{key:"ban",value:function(e,t){return g.Z.to(this._memberBase+"ban").query("memberId",t).call({infoMessage:"The user was banned from this Space."})}},{key:"unban",value:function(e,t){return g.Z.to(this._memberBase+"unban").query("memberId",t).call({infoMessage:"The user was unbanned from this Space."})}},{key:"followWithPage",value:function(e,t){return g.Z.to("/api/Page/Follow/Create").query("pageId",e).query("otherPageId",t).call()}},{key:"unfollowWithPage",value:function(e,t){return g.Z.to("/api/Page/Follow/Remove").query("pageId",e).query("otherPageId",t).call()}},{key:"isSlugAvailable",value:function(e){return g.Z.to("/api/page/page/is_slug_available").query("slug",e).call()}},{key:"fetchPopularPageIds",value:function(e){return g.Z.to("/api/page/page/Popular").method("GET").query("resultCountLimit",null===e||void 0===e?void 0:e.toString()).deferToDataStore().call({useGlobalErrorHandling:!1})}},{key:"fetchPopularMemberIds",value:function(e,t){return g.Z.to("/api/page/member/popular_member_ids").method("GET").query("pageId",e).query("resultCountLimit",null===t||void 0===t?void 0:t.toString()).deferToDataStore().call({useGlobalErrorHandling:!1})}},{key:"membersByUsername",value:function(e){return g.Z.to("api/page/search/members_by_username").method("POST").body(e).call()}},{key:"setFeature",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return g.Z.to("/api/page/page/toggle_feature").query("pageId",e).query("feature",null===t||void 0===t?void 0:t.toString()).query("active",null!==(r=null===a||void 0===a?void 0:a.toString())&&void 0!==r?r:null).call({successMessage:n})}},{key:"editPageLimit",value:function(e){return g.Z.to("/api/page/limitation/edit").body(e).call()}},{key:"pageTypes",value:function(){return this._pageTypes}},{key:"pageRoles",value:function(){return this._pageRoles}},{key:"roleName",value:function(e){var t=this.pageRoles().find((function(t){return t.type===e}));return t?t.name:"Unknown"}},{key:"typeName",value:function(e){var t=this.pageTypes().find((function(t){return t.type===e}));return t?t.name:"Unknown"}},{key:"getMemberStateTitle",value:function(e){switch(e){case p.kt.MemberState.Active:return"Following";case p.kt.MemberState.Inactive:return"Unfollowed";case p.kt.MemberState.Blocked:return"Blocked";case p.kt.MemberState.Unknown:default:return"Unknown"}}},{key:"spawnOnboardingModal",value:function(e){y.tE.open({id:y.qq.Page_Onboarding,component:Promise.all([n.e(64749),n.e(84992),n.e(71752),n.e(7237),n.e(98600),n.e(15),n.e(83203),n.e(72221),n.e(36698),n.e(54635),n.e(95957),n.e(25365)]).then(n.bind(n,10108)),params:{pageId:e}})}},{key:"spawnPagePostModal",value:function(e){y.tE.open({id:y.qq.Page_Post,component:Promise.all([n.e(58786),n.e(24736),n.e(98600),n.e(15),n.e(85005),n.e(64561),n.e(52932),n.e(26404),n.e(82919),n.e(47950),n.e(57533),n.e(4369),n.e(64117),n.e(24232),n.e(38857)]).then(n.bind(n,91570)),params:{postId:e}})}},{key:"spawnEditPagePostModal",value:function(e){y.tE.open({id:y.qq.Page_PostEdit,component:Promise.all([n.e(58786),n.e(24736),n.e(84992),n.e(7237),n.e(98600),n.e(15),n.e(85005),n.e(64561),n.e(52932),n.e(26404),n.e(82919),n.e(47950),n.e(57533),n.e(4369),n.e(64117),n.e(24232),n.e(10832)]).then(n.bind(n,1431)),params:{postId:e}})}}]),i}(h.b)),S=[{min:p.kt.Page.Constants.SlugMinimumLength,message:"The slug name cannot be shorter than ".concat(p.kt.Page.Constants.SlugMinimumLength," characters.")},{max:p.kt.Page.Constants.SlugMaximumLength,message:"The slug name cannot be longer than ".concat(p.kt.Page.Constants.SlugMaximumLength," characters.")},{pattern:new RegExp(p.kt.Page.Constants.SlugRegex),message:"The slug name may only contain letters, numbers and underscore and must start with a letter and must not end with an underscore"},{validator:_.slugAvailableValidator}];function q(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.to("/api/Page/Page/invite").query("pageId",t).query("inviteeUserId",n).call({successMessage:"Invitation sent!"});case 2:w.J.trackEvent({category:P.P.Space,name:"Invite",id:t});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.to("/api/Page/Page/accept_invite").query("invitationId",t).call({successMessage:"Invitation accepted!"});case 2:w.J.trackEvent({category:P.P.Space,name:"Accept Invite",id:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.to("/api/Page/Page/decline_invite").query("invitationId",t).call({successMessage:"Invitation declined!"});case 2:w.J.trackEvent({category:P.P.Space,name:"Decline Invite",id:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("/api/Page/Page/check_kyc").query("pageId",t).call({useGlobalErrorHandling:!1}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.to("/api/page/page/activate_wallet").query("pageId",t).call({useGlobalErrorHandling:!1}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){y.tE.open({id:y.qq.Page_EditKyc,component:Promise.all([n.e(64749),n.e(8102),n.e(84992),n.e(71752),n.e(97787),n.e(84814),n.e(30285)]).then(n.bind(n,37126)),params:{pageId:e,paymentMode:t}})}},93258:function(e,t,n){e.exports=n.p+"Content/img/default/image/35d6a0c1fbcb7eae8597b246473c5d05.png"}}]);