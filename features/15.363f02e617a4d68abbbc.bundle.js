"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[15],{81295:function(e,t,n){n.d(t,{$:function(){return b}});n(47042),n(41539),n(91038),n(78783),n(82526),n(41817),n(32165),n(66992),n(33948);var r=n(28481),i=(n(19601),n(21249),n(67294)),o=n(84694),a=n(48801),u=n(52513),c=n(71578),s=n(78218),l=n(65647),d=n(70807),p=n(45908);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=i.memo((function(e){var t=i.useState(!1),n=(0,r.Z)(t,2),m=n[0],b=n[1],v=function(){return e.onSeeMoreClick?e.onSeeMoreClick():b(!m)};i.useEffect((function(){var t;m&&(null===(t=e.remeasure)||void 0===t||t.call(e))}),[m,e.remeasure]);var g;if(!e.loaded){var y,h=(null===(y=e.descriptionProps)||void 0===y?void 0:y.skeletonRows)||3;return i.createElement(u.bZ,Object.assign({},e.boxProps),(0,c.z4)(h).map((function(t){var n;return i.createElement(s.P,{key:t,size:(null===(n=e.fontProps)||void 0===n?void 0:n.size)||l.ki.Base,width:t!==h-1?u.Q2._100:u.Q2._50,marginBottom:u.mx.Small})})))}return e.text?i.createElement(u.bZ,Object.assign({},e.boxProps),function(){var t,n,r=(null===(t=e.descriptionProps)||void 0===t?void 0:t.characterLimit)||1500,u=[],c=f((0,o.Rk)(e.text));try{for(c.s();!(n=c.n()).done;){var s,l=n.value;if(!m&&l.length>r)return u.push(i.createElement(a.Y,Object.assign({},e.fontProps),i.createElement(i.Suspense,{fallback:null},i.createElement(p.V,{text:"".concat(l.substring(0,r),"...")})),!(null!==(s=e.descriptionProps)&&void 0!==s&&s.hideShowMore)&&i.createElement(d.R,{onClick:v,brand:d.B.Primary,text:" +more"}))),u;u.push(i.createElement(a.Y,Object.assign({},e.fontProps),i.createElement(i.Suspense,{fallback:null},i.createElement(p.V,{text:l})))),r-=l.length}}catch(b){c.e(b)}finally{c.f()}return u}().map((function(e,t){return i.createElement(i.Fragment,{key:t},e)}))):null!==(g=e.descriptionProps)&&void 0!==g&&g.placeholderText?i.createElement(u.bZ,Object.assign({},e.boxProps),i.createElement(l.Mo,Object.assign({},e.fontProps,{brand:l.Z7.WhiteDark,text:e.descriptionProps.placeholderText}))):null}))},13598:function(e,t,n){n.d(t,{M:function(){return o}});n(19601);var r=n(67294),i=n(78232);function o(e){return r.createElement(i.fc,Object.assign({placeholder:!0},e),e.children)}},45908:function(e,t,n){n.d(t,{V:function(){return r}});n(66992),n(41539),n(88674),n(78783),n(33948);var r=n(67294).lazy((function(){return Promise.all([n.e(82487),n.e(64547)]).then(n.bind(n,64547))}))},67774:function(e,t,n){n.d(t,{F:function(){return l}});n(19601);var r=n(67294),i=n(71578),o=n(65647),a=n(78218),u=n(52513),c=n(93212),s=n(56367),l=r.memo((function(e){var t,n=(0,s.mY)(["translations"]).t,l=(0,c.R)(e.pageId,(function(e){var t;return{loaded:e.loaded(),memberCount:null===(t=e.data())||void 0===t?void 0:t.MemberCount}}));return l.loaded?(0,i.GV)(l.memberCount)?r.createElement(o.Mo,Object.assign({},e.fontProps,{text:n("translations.base.member",{context:"count",count:l.memberCount})})):null:r.createElement(a.P,{size:null===(t=e.fontProps)||void 0===t?void 0:t.size,width:u.Q2._7rem})}))},76352:function(e,t,n){n.d(t,{e:function(){return l}});var r=n(67294),i=n(24443),o=n(15847),a=n(54561),u=n(71578),c=n(67774),s=n(93212),l=r.memo((function(e){var t,n,l,d,p,f=(0,s.R)(e.pageId,(function(e){var t;return{loaded:e.loaded(),memberCount:null===(t=e.data())||void 0===t?void 0:t.MemberCount}}));return r.createElement(i.h,{key:e.pageId,baseProps:e.imgNameProps,img:r.createElement(o.B,{pageId:e.pageId,imgProps:null===(t=e.pageImgProps)||void 0===t?void 0:t.imgProps,popoverProps:(null===(n=e.pageImgProps)||void 0===n?void 0:n.popoverProps)||e.popoverProps}),name:r.createElement(a.b,{pageId:e.pageId,nameProps:null===(l=e.pageNameProps)||void 0===l?void 0:l.nameProps,popoverProps:(null===(d=e.pageNameProps)||void 0===d?void 0:d.popoverProps)||e.popoverProps,isPrimaryHost:null===(p=e.pageNameProps)||void 0===p?void 0:p.isPrimaryHost})},e.children||!f.loaded||(0,u.Q8)(f.memberCount)?e.children:r.createElement(c.F,{pageId:e.pageId}))}))},15847:function(e,t,n){n.d(t,{B:function(){return l}});var r=n(67294),i=n(90278),o=n(29376),a=n(91264),u=n(15),c=n(15725);function s(e){var t,n=(0,o.e)(e.pageId,(function(e){return{loaded:e.loaded(),logoUrl:e.logo(1,1),logoSrcSet:e.logoSrcSet(),name:e.name(),isInactive:e.isInactive()}}));return r.createElement(i.s,{baseProps:e.imgProps,loaded:n.loaded,src:n.logoUrl,cmSrcSet:n.logoSrcSet,toView:n.isInactive?null:c.wv.toView(e.pageId,a.IH.Routing.ArenaViewIds.SpaceIndex),alt:n.name,popoverOverlay:r.createElement(u.w,{pageId:e.pageId}),disablePopover:null===(t=e.popoverProps)||void 0===t?void 0:t.disablePopover,tooltip:n.name})}var l=r.memo(s)},54561:function(e,t,n){n.d(t,{b:function(){return p}});n(19601),n(21249);var r=n(67294),i=n(20383),o=n(15725),a=n(91264),u=n(15),c=n(91908),s=n(29376),l=n(28791),d=n(71578),p=r.memo((function(e){var t,n,p=(0,s.e)(e.pageId,(function(t){var n;return{loaded:t.loaded(),name:e.shortName?t.shortName():t.name(),verified:t.isVerified(),verifiedTooltip:t.spaceVerificationTooltip(),visibility:null===(n=t.data())||void 0===n?void 0:n.Visibility}})),f={size:(null===(t=e.nameProps)||void 0===t?void 0:t.badgeSize)||c.$B.Small},m=[];return e.isPrimaryHost&&m.push(r.createElement(c.os,Object.assign({},f,{brand:c.$k.Captain,text:"Primary",tooltip:"".concat(p.name," is the primary host."),bordered:!0}))),p.visibility===a.oy.VisibilityState.Unlisted&&m.push(r.createElement(c.os,Object.assign({},f,{brand:c.$k.Gray,text:"Unlisted",tooltip:"This Space is unlisted. Only users with the link can see it."}))),r.createElement(i.D,{baseProps:e.nameProps,loaded:p.loaded,toView:p.visibility!==a.oy.VisibilityState.Inactive?o.wv.toView(e.pageId,a.IH.Routing.ArenaViewIds.SpaceIndex):null,text:p.name,verified:p.verified,verifiedTooltip:p.verifiedTooltip,popoverOverlay:r.createElement(u.w,{pageId:e.pageId}),disablePopover:null===(n=e.popoverProps)||void 0===n?void 0:n.disablePopover},!(0,d.tQ)(m)&&r.createElement(l.sf,{gutter:l.Yz.XSmall,alignItems:l.W6.Center},m.map((function(e,t){return r.createElement(l.sf,{key:t,flex:l.Gr.None},e)}))))}))},28742:function(e,t,n){n.d(t,{G:function(){return x}});n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(96156),i=n(92137),o=n(87757),a=n.n(o),u=(n(19601),n(67294)),c=n(56367),s=n(46532),l=n(69747),d=n(10648),p=n(24384),f=n(78232),m=n(91938),b=n(23415),v=n(61555),g=n(29376),y=n(15725);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=(0,c.mY)(["page","translations"]).t,n=(0,g.e)(e.pageId,(function(e){var t;return{loaded:e.loaded(),isInactive:e.isInactive(),canFollow:e.canFollow(),canLeave:e.canLeave(),name:e.name(),ownMemberId:e.ownMemberId(),urn:null===(t=e.data())||void 0===t?void 0:t.Urn}})),r={contextMenuItem:e.contextMenuItem,contextMenuItemProps:e.contextMenuItemProps,buttonProps:e.buttonProps};if(!n.loaded)return null;if(n.isInactive)return u.createElement(m.B,Object.assign({},r,{iconType:v.y.Warning,onClick:null,text:t("page.action.inactive.text"),disabled:!0}));if(!l._.isAuthenticated()){return u.createElement(m.B,Object.assign({},r,{iconType:v.y.UserAdd,onClick:function(){return s.cmAccount.spawnLogInOrRegisterModal({externalUrn:n.urn,heading:t("page.action.join.notAuthenticated",{name:n.name})})},text:t("page.action.join.text")}))}if(n.canFollow){var o=function(){var t=(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y.wv.follow(e.pageId),p.J.trackEvent({category:d.P.Space,name:"Join",label:n.name,id:e.pageId});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return u.createElement(m.B,Object.assign({},r,{iconType:v.y.UserAdd,onLoadClick:o,text:t("page.action.join.text")}))}if(n.canLeave){return u.createElement(m.B,Object.assign({},r,{buttonProps:P(P({},e.buttonProps),{},{brand:f.wc.Gray}),iconType:v.y.UserDelete,onClick:function(){return(0,b.W)({onClick:function(){return y.wv.unfollow(e.pageId,n.ownMemberId)},confirmTitle:t("page.action.leave.text"),confirmMessage:t("page.action.leave.confirmMessage",{name:n.name}),confirmBrand:f.wc.Warning,confirmButtonText:t("page.action.leave.confirmButtonText")})},text:e.contextMenuItem?t("page.action.leave.text"):t("translations.base.member",{ns:"translations",count:1})}))}return null}var x=u.memo(I)},34693:function(e,t,n){n.d(t,{V:function(){return x}});n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var r=n(96156),i=(n(19601),n(67294)),o=n(4510),a=n(56367),u=n(91264),c=n(46532),s=n(69747),l=n(78232),d=n(91938),p=n(61555),f=n(28395),m=n(26389),b=n(10898),v=n(66012),g=n(29376),y=n(15725);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=(0,a.mY)(["page"]).t,n=(0,g.e)(e.pageId,(function(e){var t,n;return{loaded:e.loaded(),subscriptionCatalogId:null===(t=e.data())||void 0===t?void 0:t.SubscriptionCatalogId,name:e.name(),isInactive:e.isInactive(),canLeave:e.canLeave(),urn:null===(n=e.data())||void 0===n?void 0:n.Urn}})),r=(0,f.W)(n.subscriptionCatalogId,(function(e){var t;return{loaded:e.loaded(),hasSubscription:e.hasSubscription(),offeringIds:null===(t=e.data())||void 0===t?void 0:t.OfferingIds}})),h=(0,v.FY)(b.cmOwnUser,(function(){return{hasSubscriptionFeature:b.cmOwnUser.hasFeature(u.Sf.Permission.Subscription_Feature)}})),I=(0,v.FY)(m.w,(function(){return{subscribed:m.w.subscribedToAny(r.offeringIds)}}),[r.offeringIds]),x=(0,v.FY)(o.D,(function(){return o.D.isTablet()})),w={contextMenuItem:e.contextMenuItem,contextMenuItemProps:e.contextMenuItemProps,buttonProps:e.buttonProps};if(!n.loaded)return null;if(!h.hasSubscriptionFeature||!r.hasSubscription)return null;if(n.isInactive)return i.createElement(d.B,Object.assign({},w,{iconType:p.y.Warning,onClick:null,text:t("page.action.inactive.text"),disabled:!0}));if(!s._.isAuthenticated()){return i.createElement(d.B,Object.assign({},w,{buttonProps:P(P({},e.buttonProps),{},{brand:n.canLeave?null:l.wc.Gray}),iconType:p.y.UserAdd,onClick:function(){return c.cmAccount.spawnLogInOrRegisterModal({externalUrn:n.urn,heading:t("page.action.subscribe.notAuthenticated",{name:n.name})})},text:t("page.action.subscribe.text")}))}if(!I.subscribed){return i.createElement(d.B,Object.assign({},w,{buttonProps:P(P({},e.buttonProps),{},{brand:n.canLeave?null:l.wc.Gray}),iconType:p.y.Subscription,onClick:function(){return y.wv.spawnSubscribeModal({pageId:e.pageId})},text:t("page.action.subscribe.text")}))}if(I.subscribed){return i.createElement(d.B,Object.assign({},w,{buttonProps:P(P({},e.buttonProps),{},{brand:l.wc.Gold}),iconType:p.y.Subscription,onClick:function(){return y.wv.spawnSubscribeModal({pageId:e.pageId})},text:e.contextMenuItem?t("page.action.editSubscriptions.text"):t("page.base.subscriber"),tooltip:!x&&t("page.action.editSubscriptions.tooltip",{name:n.name})}))}return null}var x=i.memo(I)},88152:function(e,t,n){n.d(t,{f:function(){return h}});var r=n(67294),i=n(56367),o=n(91264),a=n(13598),u=n(9144),c=n(28052),s=n(52513),l=n(28791),d=n(28395),p=n(10898),f=n(66012),m=n(29376),b=n(15725),v=n(28742),g=n(34693);function y(e){var t,n,y,h,P,I,x,w,S,k,_=(0,i.mY)(["page"]).t,O=(0,m.e)(e.pageId,(function(e){var t;return{loaded:e.loaded(),subscriptionCatalogId:null===(t=e.data())||void 0===t?void 0:t.SubscriptionCatalogId,isInactive:e.isInactive()}})),E=(0,f.FY)(b.wv,(function(){return{isBlocked:b.wv.isBlocked(e.pageId)}}),[e.pageId]),M=(0,d.W)(O.subscriptionCatalogId,(function(e){return{loaded:e.loaded(),hasSubscription:e.hasSubscription()}})),j=(0,f.FY)(p.cmOwnUser,(function(){return{hasSubscriptionFeature:p.cmOwnUser.hasFeature(o.Sf.Permission.Subscription_Feature)}})),A=function(t){return e.stacked?r.createElement(s.bZ,{marginTop:s.eD.Small},t):r.createElement(l.sf,{flex:l.Gr.Same,flexDirection:l.qI.Column,maxWidth:s.FS._15rem,marginHorizontal:s.Bq.Auto},t)};if(!O.loaded)return A(r.createElement(c.P,{size:null===(P=e.buttonProps)||void 0===P?void 0:P.size,minWidth:null===(I=e.buttonProps)||void 0===I?void 0:I.minWidth,block:!0}));if(O.isInactive)return A(r.createElement(u.mV,{text:_("page.action.inactive.tooltip"),display:l.Z.Block,disableOnTablet:!0},r.createElement(a.M,{size:null===(x=e.buttonProps)||void 0===x?void 0:x.size,minWidth:null===(w=e.buttonProps)||void 0===w?void 0:w.minWidth,block:!0,disabled:!0,text:_("page.action.inactive.text")})));if(E.isBlocked)return A(r.createElement(u.mV,{text:_("page.action.blocked.tooltip"),display:l.Z.Block,disableOnTablet:!0},r.createElement(a.M,{size:null===(S=e.buttonProps)||void 0===S?void 0:S.size,minWidth:null===(k=e.buttonProps)||void 0===k?void 0:k.minWidth,block:!0,disabled:!0,text:_("page.action.blocked.text")})));var D=r.createElement(r.Fragment,null,A(r.createElement(v.G,{pageId:e.pageId,buttonProps:{size:null===(t=e.buttonProps)||void 0===t?void 0:t.size,minWidth:null===(n=e.buttonProps)||void 0===n?void 0:n.minWidth,block:!0}})),j.hasSubscriptionFeature&&M.hasSubscription&&A(r.createElement(g.V,{pageId:e.pageId,buttonProps:{size:null===(y=e.buttonProps)||void 0===y?void 0:y.size,minWidth:null===(h=e.buttonProps)||void 0===h?void 0:h.minWidth,block:!0}})));return e.stacked?r.createElement(r.Fragment,null,D):r.createElement(l.sf,{gutter:l.Yz.Small,justifyContent:l.sM.Center},D)}var h=r.memo(y)},11189:function(e,t,n){n.d(t,{j:function(){return a}});n(82526),n(41817);var r=n(67294),i=n(29376),o=n(81295),a=r.memo((function(e){var t=(0,i.e)(e.pageId,(function(e){var t;return{loaded:e.loaded(),description:null===(t=e.data())||void 0===t?void 0:t.Description}}));return r.createElement(o.$,{loaded:t.loaded,text:t.description,boxProps:e.boxProps,descriptionProps:e.descriptionProps})}))},15:function(e,t,n){n.d(t,{w:function(){return f}});var r=n(67294),i=n(29376),o=n(52513),a=n(9096),u=n(28791),c=n(90278),s=n(78232),l=n(11189),d=n(76352),p=n(88152),f=function(e){var t=(0,i.e)(e.pageId,(function(e){return{banner:e.banner(600,150)}}));return r.createElement(o.bZ,{overflow:o.rY.Auto,style:{maxHeight:"200px"}},r.createElement(o.bZ,{backgroundUrl:t.banner},r.createElement(o.bZ,{background:t.banner?a.iM.Gray50:null},r.createElement(u.sf,{alignItems:u.W6.Center,padding:o.N$.Base,background:a.iM.LinearGradientTransparentToGrayDark},r.createElement(u.sf,{flex:u.Gr.Auto},r.createElement(d.e,{pageId:e.pageId,pageImgProps:{imgProps:{size:c.J.Medium}},popoverProps:{disablePopover:!0}})),r.createElement(u.sf,{flex:u.Gr.None},r.createElement(p.f,{pageId:e.pageId,buttonProps:{size:s.tS.Small,minWidth:!0,unfollowBrand:s.wc.Gray}}))))),r.createElement(o.bZ,{paddingHorizontal:o.qz.Base},r.createElement(l.j,{pageId:e.pageId,boxProps:{marginBottom:o.mx.Base}})))}},93212:function(e,t,n){n.d(t,{R:function(){return f}});n(12419);var r=n(6610),i=n(5991),o=n(10379),a=n(46070),u=n(77608),c=(n(47042),n(21249),n(5535)),s=n(35856),l=n(66012);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var p=function(e){(0,o.Z)(n,e);var t=d(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e,"page_summary"))._topMembersProxy=new s.n(i._scope,(function(){return i.loaded()}),"page_member",(function(){var e;return(null===(e=i.data().TopMemberIds)||void 0===e?void 0:e.slice(0,12))||[]})),i._adapter.addDataCallback((function(){return i._topMembersProxy.update()})),i}return(0,i.Z)(n,[{key:"topTwelveMemberUserIds",value:function(){return this._topMembersProxy.objects().map((function(e){return e.UserId}))}}]),n}(c.g);function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0,l.$$)(e,"page_summary",p,t,n)}},26389:function(e,t,n){n.d(t,{w:function(){return h}});n(12419);var r=n(6610),i=n(5991),o=n(10379),a=n(46070),u=n(77608),c=(n(66992),n(41539),n(88674),n(78783),n(33948),n(21249),n(57327),n(69826),n(26699),n(32023),n(92222),n(71578)),s=n(39743),l=n(88351),d=n(87764),p=n(35856),f=n(91264),m=n(84694),b=n(57432),v=n(9123),g=n(79075);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var h=new(function(e){(0,o.Z)(a,e);var t=y(a);function a(){var e;return(0,r.Z)(this,a),(e=t.call(this)).spawnSubscriptionPlanManageModal=function(e){s.tE.open({id:s.qq.Subscription_PlanManage,component:Promise.all([n.e(84992),n.e(82633)]).then(n.bind(n,82633)),params:e})},e._start=new l.g(e._scope),e._subscriptions=new p.n(e._scope,(function(){return e.loaded()}),"subscription",(function(){return e.subscriptionIds()})),e._start.adapter().addDataCallback((function(){e._subscriptions.update()})),d.b.ready((function(){e._start.initOwn()})),e}return(0,i.Z)(a,[{key:"voidObservable",value:function(){return this._scope.voidObservable()}},{key:"loaded",value:function(){return this._start.loaded()}},{key:"subscriptionHandles",value:function(){var e,t;return null!==(e=null===(t=this._start.data())||void 0===t?void 0:t.Handles)&&void 0!==e?e:[]}},{key:"offeringIds",value:function(){return this.subscriptionHandles().map((function(e){return e.OfferingId}))}},{key:"missingPerkIds",value:function(e){return this._start.missingPerkIds(e)}},{key:"subscriptionIds",value:function(){return this.subscriptionHandles().map((function(e){return e.SubscriptionId}))}},{key:"activeSubscriptionOfferingIds",value:function(){return this.subscriptions().filter((function(e){return e.State!==f._D.SubscriptionState.Inactive})).map((function(e){return e.OfferingId}))}},{key:"subscriptions",value:function(){return this._subscriptions.objects()}},{key:"subscriptionsLoaded",value:function(){return this._subscriptions.load()}},{key:"recurringActiveSubscriptions",value:function(){return this.subscriptions().filter((function(e){return e.State!==f._D.SubscriptionState.Inactive&&!!e.RecurPlanId&&!!e.DateEnding}))}},{key:"oneTimeActiveSubscriptions",value:function(){return this.subscriptions().filter((function(e){return e.State!==f._D.SubscriptionState.Inactive&&!e.DateEnding}))}},{key:"nonRecurringActiveSubscriptions",value:function(){return this.subscriptions().filter((function(e){return e.State!==f._D.SubscriptionState.Inactive&&!e.RecurPlanId&&!!e.DateEnding}))}},{key:"inactiveSubscriptions",value:function(){return this.subscriptions().filter((function(e){return e.State===f._D.SubscriptionState.Inactive}))}},{key:"subscribedToAny",value:function(e){return(0,c.xM)(this.activeSubscriptionOfferingIds(),e).length>0}},{key:"purchasedOffering",value:function(e){return!!this.offeringIds().find((function(t){return t===e}))}},{key:"subscribedToPlan",value:function(e){return this.recurringActiveSubscriptions().map((function(e){return e.RecurPlanId})).includes(e)}},{key:"subscription",value:function(e){return this.subscriptions().find((function(t){return t.OfferingId===e}))}},{key:"spawnSubscriptionModal",value:function(e){s.tE.open({id:s.qq.Subscription,component:Promise.all([n.e(98600),n.e(73267),n.e(4003)]).then(n.bind(n,6174)),params:e})}},{key:"spawnSubscriptionRenewModal",value:function(e){s.tE.open({id:s.qq.Subscription_Renew,component:Promise.all([n.e(73267),n.e(26993)]).then(n.bind(n,56972)),params:e})}},{key:"spawnSubscriptionOfferingCreateModal",value:function(e){s.tE.open({id:s.qq.Subscription_OfferingCreate,component:n.e(83371).then(n.bind(n,83371)),params:e})}},{key:"spawnSubscriptionOfferingWizardModal",value:function(e){s.tE.open({id:s.qq.Subscription_OfferingWizard,component:Promise.all([n.e(73267),n.e(4094),n.e(14988)]).then(n.bind(n,14988)),params:e})}},{key:"spawnSubscriptionOfferingManageModal",value:function(e){s.tE.open({id:s.qq.Subscription_OfferingManage,component:Promise.all([n.e(84992),n.e(73267),n.e(86808)]).then(n.bind(n,36616)),params:e})}},{key:"spawnSubscriptionPerksManageModal",value:function(e){s.tE.open({id:s.qq.Subscription_PerkManage,component:Promise.all([n.e(84992),n.e(7237),n.e(80490)]).then(n.bind(n,80490)),params:e})}},{key:"_formatDisplayName",value:function(e,t,n){var r=t?"".concat(e,"s"):e;return n?(0,m.zT)(r):r}},{key:"offeringDisplayName",value:function(e){return this._formatDisplayName("offering",null===e||void 0===e?void 0:e.pluralize,null===e||void 0===e?void 0:e.capitalize)}},{key:"offeringDescription",value:function(){return"An ".concat(this.offeringDisplayName()," is what members purchase in order to access the ").concat(this.perkDisplayName({pluralize:!0})," included in the ").concat(this.offeringDisplayName(),".")}},{key:"perkDisplayName",value:function(e){return this._formatDisplayName("benefit",null===e||void 0===e?void 0:e.pluralize,null===e||void 0===e?void 0:e.capitalize)}},{key:"perkDescription",value:function(){return"A ".concat(this.perkDisplayName()," describes something your subscribers get access to. A ").concat(this.perkDisplayName()," can be included in multiple ").concat(this.offeringDisplayName({pluralize:!0})," at the same time.")}},{key:"planDescription",value:function(){return"A plan describes the price for a duration of an ".concat(this.offeringDisplayName(),". You can create multiple plans if you want to offer discounts to members that subscribe for longer periods.")}},{key:"planName",value:function(e){var t=(0,g._n)(e.durationDays),n=e.isInfinite;return e.showOfferingName?"".concat(e.offeringName," (").concat(n?"one-time purchase":"".concat(t),")"):n?"One-time purchase":(0,m.zT)(t)}},{key:"planDetails",value:function(e,t){return t.feeTokenCount>0?"".concat(t.isInfinite?"":"Renews every ".concat((0,m.NM)(t.durationDays,"day")," at ")," ").concat(b.N.moneyString({tokenCount:t.feeTokenCount||0,currency:e,currencySign:!0})," ").concat(t.manage?" \u2022 You earn ".concat(b.N.moneyString({tokenCount:t.feeTokenCount*(1-t.commisionRate)*this.defaultTaxFactor(),currency:e,currencySign:!0}),"/").concat(t.isInfinite?"purchase":"subscription"," (after 20% Swedish VAT and ").concat((100*t.commisionRate).toFixed(2),"% platform fee)"):""):"Free"}},{key:"recurringOfferingDescription",value:function(){return"Recurring ".concat(this.offeringDisplayName({pluralize:!0})," automatically renew every 30 days unless canceled by the subscribing member.")}},{key:"oneTimeOfferingDescription",value:function(){return"One-time ".concat(this.offeringDisplayName({pluralize:!0})," don't renew automatically and can be used to charge for activities or membership to the Space.")}},{key:"defaultTaxFactor",value:function(){return.8}}]),a}(v.b))},88351:function(e,t,n){n.d(t,{g:function(){return P}});n(12419),n(47042),n(91038),n(82526),n(41817),n(32165);var r=n(6610),i=n(5991),o=n(10379),a=n(46070),u=n(77608),c=(n(21249),n(57327),n(66992),n(41539),n(70189),n(78783),n(33948),n(71578)),s=n(91264),l=n(5535),d=n(35856),p=(n(69826),n(40175)),f=n(65732),m=function(){function e(t){var n=this;(0,r.Z)(this,e),this._scope=t,this._adapter=new p.Q(t),this._adapter.initByOwnUserId("page_start"),this._ownAuxMembersProxy=new d.n(t,(function(){return n._adapter.isLoaded()}),"page_aux_member",(function(){return n._adapter.data().AuxMembers.map((function(e){return e.OwnMemberId}))})),this._adapter.addDataCallback((function(){n._ownAuxMembersProxy.update()})),this._ownAuxMembersProxy.addLazyDataCallback((function(){var e;null===(e=n._ownAuxMemberPagesProxy)||void 0===e||e.update()}))}return(0,i.Z)(e,[{key:"ownAuxMembers",value:function(){return this._ownAuxMembersProxy.objects()}},{key:"ownAuxMember",value:function(e){if(e&&e!==f.i.empty())return this.ownAuxMembers().find((function(t){return t.PageId===e}))}},{key:"pages",value:function(){return this.pagesProxy().objects()}},{key:"pagesProxy",value:function(){var e=this;return this._ownAuxMemberPagesProxy||(this._ownAuxMemberPagesProxy=new d.n(this._scope,(function(){return e._ownAuxMembersProxy.load()}),"page",(function(){return e._ownAuxMembersProxy.objects().map((function(e){return e.PageId}))}))),this._ownAuxMemberPagesProxy}}]),e}(),b=n(90540),v=n(10898);function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var P=function(e){(0,o.Z)(n,e);var t=h(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e,"subscription_start"))._adapter.addDataCallback((function(){var e,t;null===(e=i._offeringsProxy)||void 0===e||e.update(),null===(t=i._subscriptionsProxy)||void 0===t||t.update()})),i._ownPageAuxMemberCatalogsProxy=new d.n(i._scope,(function(){return i._getPageStart().pagesProxy().load()}),"subscription_catalog",(function(){return i._getPageStart().pages().filter((function(e){var t=i._getPageStart().ownAuxMember(e.Id);return!(0,c.tQ)(e.SubscriptionCatalogId)&&b.o.hasAccess(v.cmOwnUser,s.oy.ActionIdentifier.Page_EditSubscriptions,t?t.Role:null,e)})).map((function(e){return e.SubscriptionCatalogId}))})),i}return(0,i.Z)(n,[{key:"offerings",value:function(){return this._getOfferingsProxy().objects()}},{key:"_getOfferingsProxy",value:function(){var e=this;return this._offeringsProxy||(this._offeringsProxy=new d.n(this._scope,(function(){var t;return!(null===(t=e.data())||void 0===t||!t.Handles)}),"subscription_offering",(function(){return e.data().Handles.map((function(e){return e.OfferingId}))}))),this._offeringsProxy}},{key:"subscriptions",value:function(){return this._getSubscriptionsProxy().objects()}},{key:"_getSubscriptionsProxy",value:function(){var e=this;return this._subscriptionsProxy||(this._subscriptionsProxy=new d.n(this._scope,(function(){var t;return!(null===(t=e.data())||void 0===t||!t.Handles)}),"subscription",(function(){return e.data().Handles.map((function(e){return e.SubscriptionId}))}))),this._subscriptionsProxy}},{key:"missingPerkIds",value:function(e){if((0,c.tQ)(e))return[];var t=this._getHeldPerkIds();return e.filter((function(e){return!t.has(e)}))}},{key:"_getHeldPerkIds",value:function(){var e,t=new Set,n=new Set,r=g(this.subscriptions());try{for(r.s();!(e=r.n()).done;){var i=e.value;i.State===s._D.SubscriptionState.Active&&n.add(i.OfferingId)}}catch(h){r.e(h)}finally{r.f()}var o,a=g(this.offerings());try{for(a.s();!(o=a.n()).done;){var u=o.value;if(n.has(u.Id)){var c,l=g(u.PerkIds);try{for(l.s();!(c=l.n()).done;){var d=c.value;t.add(d)}}catch(h){l.e(h)}finally{l.f()}}}}catch(h){a.e(h)}finally{a.f()}var p,f=g(this._ownPageAuxMemberCatalogsProxy.objects());try{for(f.s();!(p=f.n()).done;){var m,b,v=g(null!==(m=p.value.PerkIds)&&void 0!==m?m:[]);try{for(v.s();!(b=v.n()).done;){var y=b.value;t.add(y)}}catch(h){v.e(h)}finally{v.f()}}}catch(h){f.e(h)}finally{f.f()}return t}},{key:"_getPageStart",value:function(){var e=this;return this._pageStart||(this._pageStart=new m(this._scope),this._pageStart.pagesProxy().addLazyDataCallback((function(){e._ownPageAuxMemberCatalogsProxy.update()}))),this._pageStart}}]),n}(l.g)}}]);