"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[62682],{2311:function(e,t,n){n.d(t,{JK:function(){return a},E9:function(){return w},P_:function(){return k},Cv:function(){return _},WT:function(){return T},eV:function(){return I},BD:function(){return L},G:function(){return R},l2:function(){return j},Mo:function(){return C},Vi:function(){return q},JV:function(){return A},dC:function(){return H},i0:function(){return Z},$1:function(){return M},IE:function(){return U},VL:function(){return P}});var a,r=n(92137),i=n(6610),o=n(5991),s=n(87757),u=n.n(s),c=(n(92222),n(66992),n(41539),n(88674),n(78783),n(33948),n(60185)),d=n(39743),l=n(91264),f=n(20555),m=n(10648),h=n(67616),p=n(4510),v=n(79075),g=n(87051),y=n(56367),b=n(71578);function w(e){d.tE.open({id:d.qq.Ladder_EditTemplate,component:Promise.all([n.e(64749),n.e(84992),n.e(71752),n.e(7237),n.e(98600),n.e(15725),n.e(15),n.e(97787),n.e(72221),n.e(49751)]).then(n.bind(n,83633)),params:e})}function k(e,t){d.tE.open({id:d.qq.Ladder_Wizard,component:Promise.all([n.e(64749),n.e(3347),n.e(84992),n.e(71752),n.e(7237),n.e(98600),n.e(15725),n.e(91290),n.e(15),n.e(97787),n.e(47950),n.e(50551),n.e(19605),n.e(9359),n.e(38431),n.e(30777)]).then(n.bind(n,74083)),params:e,onClose:t})}function _(e){return d.tE.open({id:d.qq.Ladder_Join,component:Promise.all([n.e(58786),n.e(5756),n.e(98600),n.e(15725),n.e(91290),n.e(15),n.e(47950),n.e(33898)]).then(n.bind(n,78424)),params:e})}function T(e,t){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.to("/api/Ladder/Ladder/join_ladder").query("ladderId",t).query("avatarId",n).call({successMessage:"You successfully joined the ladder.",trackEvent:{category:m.P.Ladder,name:"Join",label:t}});case 2:c.$.browseToId(l.IH.Routing.ArenaViewIds.Ladder,{ladderId:t});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.Z.to("/api/Ladder/Ladder/edit_metadata").query("ladderId",t).body(n).call({successMessage:y.Yi.t("toast.base.savedSettings",{ns:"toast"})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.Z.to("/api/Ladder/Ladder/cancel").query("ladderId",t).call({successMessage:y.Yi.t("toast.base.success",{ns:"toast"})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.Z.to("/api/Ladder/Ladder/remove_competitor").query("competitorId",t).call({successMessage:y.Yi.t("toast.base.success",{ns:"toast"})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){if(!e||t.GameBrand!==e.GameBrand)return!1;var n=g.aW.avatarRank(t),a=(0,b.Q8)(e.MinRank)||n>=e.MinRank,r=(0,b.Q8)(e.MaxRank)||n<=e.MaxRank;return a&&r}function C(e){switch(e){case l.Bz.LadderState.New:return{title:"Setup",description:"The ladder is not open for registrations yet.",badgeBrand:h.$.Info};case l.Bz.LadderState.Lobby:return{title:"Open",description:"The ladder is open for registrations.",badgeBrand:h.$.Info};case l.Bz.LadderState.Running:return{title:"Ongoing",description:"The ladder is ongoing. All games started now will be considered towards your score in the ladder.",badgeBrand:h.$.Info};case l.Bz.LadderState.Resolving:return{title:"Resolving",description:"The ladder is closing and currently waiting for all ongoing games to finish. Games started now will not be considered towards your score in the ladder.",badgeBrand:h.$.Success};case l.Bz.LadderState.Resolved:return{title:"Completed (*)",description:"The ladder is completed.",badgeBrand:h.$.Success};case l.Bz.LadderState.Redeemed:return{title:"Completed",description:"The ladder is completed and the winners have received their prizes.",badgeBrand:h.$.Success};case l.Bz.LadderState.Cancelling:return{title:"Cancelling",description:"The ladder is being cancelled.",badgeBrand:h.$.Danger};case l.Bz.LadderState.Cancelled:return{title:"Cancelled",description:"The ladder has been cancelled.",badgeBrand:h.$.Danger};default:return null}}function q(){return n(53634)}function A(e){return(0,v.cU)(e)}function H(e,t,n){var a=g.aW.rankName(n,e),r=g.aW.rankName(n,t);return(0,b.Q8)(t)&&(0,b.Q8)(e)?"Open for all ranks":(0,b.Q8)(t)||(0,b.Q8)(e)?(0,b.Q8)(e)?"Up to ".concat(r):"From ".concat(a):"".concat(a," \u2013 ").concat(r)}function Z(){var e=(0,y.mY)(["translations"]).t;return[{num:12,name:e("translations.time.hour",{count:12,context:"count",ns:"translations"})},{num:24,name:e("translations.time.day",{count:1,context:"count",ns:"translations"})},{num:168,name:e("translations.time.week",{count:1,context:"count",ns:"translations"})},{num:740,name:e("translations.time.month",{count:1,context:"count",ns:"translations"})}]}function M(){var e=(0,y.mY)(["translations"]).t;return[{num:0,name:"At time of start"},{num:1,name:e("translations.time.hour",{count:1,context:"count",ns:"translations"})},{num:12,name:e("translations.time.hour",{count:12,context:"count",ns:"translations"})},{num:24,name:e("translations.time.day",{count:1,context:"count",ns:"translations"})},{num:72,name:e("translations.time.day",{count:3,context:"count",ns:"translations"})},{num:168,name:e("translations.time.week",{count:1,context:"count",ns:"translations"})}]}function U(e){d.tE.open({id:d.qq.Ladder_Competitor,component:Promise.all([n.e(98600),n.e(15725),n.e(44247),n.e(44485)]).then(n.bind(n,62354)),params:{competitorId:e}})}!function(e){e.Logo="ladder_logo",e.Banner="ladder_banner",e.Thumbnail="ladder_thumbnail"}(a||(a={}));var P=new(function(){function e(){(0,i.Z)(this,e)}return(0,o.Z)(e,[{key:"uploadTokenUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"/api/ladder/Image/RequestUploadToken?imageType=".concat(t,"&externalId=").concat(e,"&forLadder=").concat(n)}},{key:"toView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.IH.Routing.ArenaViewIds.Ladder;return e?{id:t,params:{ladderId:e}}:null}},{key:"settingsToView",value:function(e){return p.D.isTablet()?this.toView(e,l.IH.Routing.ArenaViewIds.LadderSettingsMenu):this.toView(e,l.IH.Routing.ArenaViewIds.LadderSettings)}},{key:"deleteTemplate",value:function(e){return f.Z.to("/api/Ladder/Template/delete").query("ladderTemplateId",e).call({successMessage:"The ladder template was successfully removed."})}},{key:"createTemplate",value:function(e){return f.Z.to("/api/Ladder/Template/create").body(e).call({successMessage:"The ladder template was successfully created."})}},{key:"editTemplate",value:function(e){return f.Z.to("/api/Ladder/Template/edit").body(e).call({successMessage:"The ladder template was successfully edited."})}}]),e}())},83082:function(e,t,n){n.d(t,{dL:function(){return a},sU:function(){return r},Rs:function(){return P}});n(12419),n(47941),n(82526),n(57327),n(38880),n(54747),n(49337);var a,r,i=n(92137),o=n(96156),s=n(6610),u=n(5991),c=n(66213),d=n(10379),l=n(46070),f=n(77608),m=n(87757),h=n.n(m),p=(n(66992),n(41539),n(70189),n(78783),n(33948),n(69826),n(39714),n(92222),n(71578)),v=n(40175),g=n(86784),y=n(753),b=n(86805),w=n(91264),k=n(77013),_=n(87051),T=n(66012),S=n(91290),I=n(69747),x=n(60185),L=n(46532),O=n(56367),R=n(58329),B=n(18860),j=n(23415),C=n(16106),q=n(10898);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.Z)(e);if(t){var r=(0,f.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.Z)(this,n)}}!function(e){e[e.Solo=1]="Solo",e[e.Team=2]="Team"}(a||(a={})),function(e){e[e.Visible=1]="Visible",e[e.Hidden=2]="Hidden",e[e.Fallback=3]="Fallback"}(r||(r={}));var M=function(e){(0,d.Z)(n,e);var t=Z(n);function n(e){var a;return(0,s.Z)(this,n),(a=t.call(this,e))._feedbackStatus={done:!1,buttonState:r.Visible,heading:"",text:""},a._tierAdapter=new v.Q(a._scope),a._teamStartAdapter=new v.Q(a._scope).addDataCallback((function(e){a._socialTeamIdSet=new Set(e.OwnTeamIds)})),a._scope.subscribeVoid(O.Yi),a}return(0,u.Z)(n,[{key:"_setJoinHost",value:function(e){return this._joinHost||(this._joinHost=e,this._scope.subscribeVoid(this._joinHost)),this}},{key:"init",value:function(e,t){return t?(this._setJoinHost(t),e&&((0,c.Z)((0,f.Z)(n.prototype),"initById",this).call(this,e),this._tierAdapter.initByUrn(new b.Urn("user_tier_collection",e)),g.S.isAuthenticated()&&e===g.S.ownUserId()&&this._teamStartAdapter.initByOwnUserId("team_start")),this):this}},{key:"_userId",value:function(){return this.id()}},{key:"isOwn",value:function(){return g.S.isAuthenticated()&&this._userId()===g.S.ownUserId()}},{key:"_hasOwnMember",value:function(){var e;return this.isOwn()&&(null===(e=this._joinHost)||void 0===e?void 0:e.hasOwnAttendance())}},{key:"shouldJoin",value:function(){var e;return(null===(e=this._joinHost)||void 0===e?void 0:e.stateOk())&&!this._hasOwnMember()}},{key:"canJoin",value:function(){return this.shouldJoin()&&this.allRequirementsDone(a.Solo)}},{key:"canDraftTeam",value:function(){return this.canJoin()&&this.allRequirementsDone(a.Team)}},{key:"firstNonCompletedRequirement",value:function(e){return this._requirements(e).find((function(e){return!e.done}))}},{key:"allRequirementsDone",value:function(e){return!this.firstNonCompletedRequirement(e)}},{key:"_requirements",value:function(e){switch(e){case a.Solo:return this.joinTip();case a.Team:return this.draftTeamTip();default:return[]}}},{key:"joinTip",value:function(){var e=this,t=this._joinHost,n=[],a=this._feedbackStatus;if(!t||!t.loaded())return[H(H({},a),{},{buttonState:r.Hidden,text:O.Yi.t("translations.indicator.loading",{ns:"translations"})})];if(!t.stateOk())return[H(H({},a),{},{buttonState:r.Fallback,text:O.Yi.t("translations.meta.titleCannotBeJoined",{ns:"translations",title:t.noun()})})];if(!I._.isAuthenticated())return[H(H({},a),{},{ctasToComplete:[{text:O.Yi.t("translations.auth.logInOrSignUp",{ns:"translations"}),onClick:function(){var t;x.$.setQuery(w.IH.Routing.QueryConstants.Join,!0),L.cmAccount.spawnLogInOrRegisterModal({externalUrn:null===(t=e._joinHost.externalUrn())||void 0===t?void 0:t.toString(),heading:O.Yi.t("translations.auth.logInOrSignUpToJoinTheTitle",{ns:"translations",title:e._joinHost.noun()})})},invokeCtaImmediately:!0}],text:O.Yi.t("translations.auth.logInOrSignUp",{ns:"translations"})})];var o=!1;if(this.isOwn())this._hasOwnMember()&&(o=!0);else{var s=t.alreadyJoined(this._userId());if(s.feedback)return[H(H({},a),{},{buttonState:r.Fallback,text:s.feedback})];o=s.value}if(o)return[H(H({},a),{},{buttonState:r.Fallback,text:"".concat(this._genitive()," are already in this ").concat(t.noun(),".")})];if(t.isBlocked())return[H(H({},a),{},{text:"You are blocked from interacting with this Space."})];var u,c=this.avatars().find((function(e){return e.GameRealm===t.gameRealm()})),d=_.aW.gameAvatarMeta(this._gameBrand());(n.push(H(H({},a),{},{done:!!c,heading:d.addLabel,ctasToComplete:[{text:d.addLabel,onClick:function(){return S.x.spawnAddAvatarModal(e._gameBrand(),t.gameRealm())}}],text:"".concat(this._genitive()," need to connect a")+" ".concat(t.gameInfoShortTitle()," game account")+" (".concat(_.aW.gameRealmShortTitle(t.gameRealm()),").")})),c&&!y.L.inTierSpan(this._gameBrand(),t.maximumTier(),t.minimumTier(),this._tierAdapter.data())&&n.push(H(H({},a),{},{text:"".concat(this._genitive()," are not in the required Challengermode Tier ")+"for this ".concat(t.noun(),".")})),c&&t.requiresVerifiedPubgAccount())&&n.push(H(H({},a),{},{heading:"Relink account",text:"You need to relink your PUBG account.",done:!(null===(u=c.Data)||void 0===u||!u.PlayerId),ctasToComplete:[{text:"relink",onClick:function(){(0,j.W)({confirmTitle:"Relink account?",confirmMessage:"This will remove your current account and start the new account link process.",onClick:function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.u.unlink(c.Id);case 2:return e.next=4,(0,C.K)(q.cmOwnUser.voidObservable(),(function(){return!q.cmOwnUser.avatars().some((function(e){return e.Id===c.Id}))}));case 4:B.A.spawnAddAvatarModal();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}}]}));return n}},{key:"draftTeamTip",value:function(){var e=this._joinHost,t=this._feedbackStatus,n=this.joinTip();if(!(0,p.tQ)(n))return n;if(!e||!e.loaded())return[H(H({},t),{},{buttonState:r.Hidden,text:"Loading..."})];if(e.invitational())if(1===e.maximumTeamSize()){if(!e.hasReservation(new Set([this.id()])))return[H(H({},t),{},{text:"".concat(this._genitive()," need a reservation")+" for this invite-only ".concat(e.noun(),".")})]}else{if(!this._teamStartAdapter.isLoaded()||!this._socialTeamIdSet)return[H(H({},t),{},{text:"Loading..."})];if(!e.hasReservation(this._socialTeamIdSet))return[H(H({},t),{},{text:"".concat(this._genitive()," need a Challengermode team with a reservation")+" for this invite-only ".concat(e.noun(),".")})]}return[]}},{key:"hasInvitation",value:function(){var e,t;return 1===(null===(e=this._joinHost)||void 0===e?void 0:e.maximumTeamSize())?this._joinHost.hasReservation(new Set([this.id()])):this._socialTeamIdSet&&(null===(t=this._joinHost)||void 0===t?void 0:t.hasReservation(this._socialTeamIdSet))}},{key:"_genitive",value:function(){return this.isOwn()?"You":"They"}},{key:"_possessivePronoun",value:function(){return"You"===this._genitive()?"Your":"Their"}},{key:"_gameBrand",value:function(){var e;return _.aW.gameBrand(null===(e=this._joinHost)||void 0===e?void 0:e.gameRealm())}}]),n}(k.n),U="joining_user";function P(e,t,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,T.wL)(e&&null!==t&&void 0!==t&&t.externalUrn()?"".concat(U,":").concat(e,":").concat(null===(a=t.externalUrn())||void 0===a?void 0:a.toString()):U,(function(){return(new M).init(e,t)}),n,r)}}}]);