"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[48445],{48445:function(e,t,n){n.d(t,{u:function(){return R},q:function(){return L}});n(12419),n(47941),n(82526),n(38880),n(54747),n(49337),n(47042),n(91038),n(41817),n(32165);var r=n(96156),i=n(6610),o=n(5991),a=n(10379),s=n(46070),u=n(77608),c=(n(69826),n(57327),n(92222),n(66992),n(41539),n(70189),n(78783),n(33948),n(21249),n(88674),n(39714),n(71578)),d=n(10898),l=n(25274),f=n(21622),m=n(57432),h=n(91264),y=n(88351),p=(n(26699),n(32023),n(5535));function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var b=function(e){(0,a.Z)(n,e);var t=v(n);function n(e){return(0,i.Z)(this,n),t.call(this,e,"survey_start")}return(0,o.Z)(n,[{key:"missingResponses",value:function(e){var t=this;return(0,c.tQ)(e)?[]:e.filter((function(e){var n;return!(null!==(n=t.data())&&void 0!==n&&n.SurveyIds.includes(e))}))}}]),n}(p.g),g=n(753),w=n(69747),k=n(65161),_=n(15725),S=n(39743),T=n(66012),x=n(83082),B=n(97787),P=n(81668),Z=n(58329),I=n(56781),C=n(56367);function O(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var R=function(e){(0,a.Z)(r,e);var t=A(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments))._feedbackStatus={done:!1,buttonState:x.sU.Visible,heading:"",text:""},e}return(0,o.Z)(r,[{key:"_setFeedbackHost",value:function(e){return this._feedbackHost||(this._feedbackHost=e,this._scope.subscribeVoid(this._feedbackHost)),this}},{key:"init",value:function(e){return e&&w._.isAuthenticated()?(this._subscriptionStart=new y.g(this._scope).initOwn(),this._surveyStart=new b(this._scope).initOwn(),this._setFeedbackHost(e),this._scope.subscribeVoid(m.N),this._scope.subscribeVoid(d.cmOwnUser),this._scope.subscribeVoid(C.Yi),this):this}},{key:"firstNonCompletedRequirement",value:function(e){return this._requirements(e).find((function(e){return!e.done}))}},{key:"_requirements",value:function(e){switch(e){case x.dL.Solo:return this.ownReadyFeedback();case x.dL.Team:return this.teamFeedback();default:return[]}}},{key:"teamFeedback",value:function(){var e=this._feedbackHost,t=Y(Y({},this._feedbackStatus),{},{hideLayoutButton:!0});if(!e||!e.loaded())return[];if(e.isClosed())return[];var n=e.ownAttendance();if(!n)return[];var i,o,a=e.ownTeam(n),s=e.ownTeamMembers(),u=s.filter((function(t){return e.isPlayer(t)})),d=(0,f.n6)(u,(function(t){return e.isReady(t)})),m=d&&e.onWaitList(n),y=u.length,p=(0,f.gE)(s,(function(t){return e.isBenchWarmer(t)})),v=(0,f.gE)(s,(function(t){return e.isCoach(t)}));if(!e.isPreRunning()){if(e.ownTeamNotSeeded(n))return o="".concat(r.ownTeamActed(e)," not seeded."),d?m?o+=" You were on the waiting list and there was not a free slot.":y<e.minimumTeamSize()?o+=" You needed more players.":y>e.maximumTeamSize()||p>e.benchSize()||v>e.coachBenchSize()?o+=" You had too many team members.":o+=" You may have been too late.":o+=" ".concat(this._ownTeamGenitive(e)," didn't complete the check-in."),[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:o})];var b=e.placement(n);if((0,c.GV)(b))return o=C.Yi.t("lobby.feedback.placement.text",{ns:"lobby",placement:b+1}),[Y(Y({},t),{},{alertBrand:l.Z6.Success,text:o})];var g=e.ownTeamPlayingFeedback();return(0,c.Of)(g)?[Y(Y({},t),g)]:[]}if(e.isSeeding())return[Y(Y({},t),{},{alertBrand:l.Z6.Info,text:"The ".concat(e.noun()," is currently being seeded.")})];if(e.requiresAdmission()&&!e.ownTeamAdmissible(n))switch(e.ownTeamAdmissionStatus(n)){case h.oy.Admission.AdmissionRequestStatus.AwaitingApplication:return[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:"".concat(this._ownTeamGenitive(e)," ").concat(r._isSolo(e)?"":"captain"," need to request to join this ").concat(e.noun(),".")})];case h.oy.Admission.AdmissionRequestStatus.Declined:return[Y(Y({},t),{},{alertBrand:l.Z6.Danger,text:"Your request to join was declined. ".concat(this._ownTeamGenitive(e)," ").concat(r._isSolo(e)?"":"captain"," need to re-request to join this ").concat(e.noun(),".")})];case h.oy.Admission.AdmissionRequestStatus.Pending:return[Y(Y({},t),{},{alertBrand:l.Z6.Info,text:"Your ".concat(r._isSolo(e)?"":"team's"," request to join this ").concat(e.noun()," is pending.")})]}if(y<e.minimumTeamSize()){var w=e.minimumTeamSize()-y;return[Y(Y({},t),{},{alertBrand:l.Z6.Info,text:"Your team needs ".concat(w," more player").concat(w>1?"s":"",".").concat(e.isLookingForMembers(a)?" We will attempt to match you with others right before the ".concat(e.noun()," starts."):"")})]}if(y>e.maximumTeamSize())return[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:"".concat(this._ownTeamPossessive(e)," too many players in the active lineup.")})];if(p>e.benchSize())return[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:"".concat(this._ownTeamPossessive(e)," too many substitutes.")})];if(v>e.coachBenchSize())return[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:"".concat(this._ownTeamPossessive(e)," too many coaches.")})];var k=this.ownReadyFeedback();if((0,c.Of)(k))return k;if(!d)return i=l.Z6.Info,e.isCheckInUsed()?(o="".concat(this._ownMembersGenitive(e)," must ready up")+" before the start of the ".concat(e.noun(),"."),e.isWaitingForCheckIn()||(i=l.Z6.Warning)):(i=l.Z6.Warning,o=this._ownParticipationText(e)),e.hasLimitedSlots()&&(i=l.Z6.Warning,o+=" First come, first served!"),[Y(Y({},t),{},{alertBrand:i,text:o})];if(e.isCheckInUsed()){if(e.isWaitingForCheckIn())return[Y(Y({},t),{},{alertBrand:l.Z6.Info,text:"The check-in period begins shortly before the start of the ".concat(e.noun(),".")})];if(!(0,f.n6)(u,(function(t){return e.isCheckedIn(t)})))return[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:this._ownParticipationText(e)})]}if(!e.seedable(a))return[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:"There is a problem with your team setup. Please contact support."})];if(m){var _=e.waitListIndex(n),S="".concat(this._ownTeamActing(e)," number ").concat(_+1," on the waiting list.");return[Y(Y({},t),{},{alertBrand:l.Z6.Warning,text:"".concat(S," ").concat(e.teamsMissing()>0?"At least ".concat(e.teamsMissing()," more ").concat(this._participantName(e,e.teamsMissing()>1)," need").concat(1===e.teamsMissing()?"s":""," to confirm participation for the tournament to start."):"You will not play - unless slots become free.")})]}return[Y(Y({},t),{},{alertBrand:l.Z6.Success,text:"".concat(this._ownTeamActing(e)," good to go!")+" Please wait for the ".concat(e.noun()," to start.")})]}},{key:"ownReadyFeedback",value:function(){var e,t=this,r=this._feedbackHost,i=null===r||void 0===r?void 0:r.ownMember(),o=[];if(!r||!(0,c.Of)(i))return o;var a=d.cmOwnUser.avatars().find((function(e){return e.Id===r.avatarId(i)}));if(a&&!g.L.inTierSpan(a.GameBrand,r.maximumTier(),r.minimumTier())){var s="You need to be ";return r.maximumTier()&&r.minimumTier()?s+=r.minimumTier()===r.maximumTier()?"in tier ".concat(r.maximumTier()):"between tier ".concat(r.minimumTier(),"-").concat(r.maximumTier()):r.maximumTier()?s+="in tier ".concat(r.maximumTier()," or lower"):r.minimumTier()&&(s+="in tier ".concat(r.minimumTier()," or higher")),[Y(Y({},this._feedbackStatus),{},{text:"".concat(s," to be able to participate in this tournament"),alertBrand:l.Z6.Warning})]}if(r.isBlocked())return[Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,text:"You are blocked from interacting with this ".concat(r.noun(),".")})];if(r.ownUserNeedsToVerifySummoner(i)&&a&&o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,heading:"Verify summoner",text:"You need to verify your League of Legends summoner.",ctasToComplete:[{text:"Verify",onClick:function(){return Z.u.spawnVerifySummonerModal(a.ExternalId,r.avatarId(i),a.GameBrand)}}]})),r.isWaitingForReadyWindow()&&o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Info,text:C.Yi.t("lobby.feedback.checkInPeriod.text",{ns:"lobby",count:r.readyWindowMinutes(),noun:r.noun()})})),r.paymentRequired(i)&&(d.cmOwnUser.isCashGameEligible()||o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,text:"You need to be 18 or older to contribute to a crowdfunded ".concat(r.noun(),".")})),o.push(Y(Y({},this._feedbackStatus),{},{done:m.N.hasSufficientFunds(r.entryFee()),heading:"Deposit money",alertBrand:l.Z6.Warning,text:"You don't have enough money on your account. This ".concat(r.noun()," has a ").concat(m.N.moneyString({tokenCount:r.entryFee(),currency:d.cmOwnUser.currency(),currencySign:!0})," entry fee."),ctasToComplete:[{text:"Deposit",onClick:function(){var e,t;return B.dR.spawnModal({mode:P.q.Deposit,tokenBalanceId:w._.ownUserId(),targetTokenBalanceOwner:d.cmOwnUser.user().urn(),amount:null!==(e=r.entryFee()-(null===(t=m.N.data())||void 0===t?void 0:t.TokenCount))&&void 0!==e?e:0,startStep:1})}}]}))),!(0,c.tQ)(r.subscriptionPerkIds())){var u=this.missingSubscriptionPerkIds(r.subscriptionPerkIds());o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,heading:"Subscribe",text:"You need to subscribe to the ".concat(r.noun()," host."),done:(0,c.tQ)(u),ctasToComplete:[{text:"Subscribe",onClick:function(){return _.wv.spawnSubscribeModal({pageId:r.primaryPageId(),requiredPerkIds:u})}}]}))}if(!(0,c.tQ)(r.surveyIds())){var f,y=new Set(this.missingSurveyResponses(r.surveyIds()));o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,done:0===y.size,heading:"Complete ".concat(r.surveyIds().length>1?"surveys":"survey"),text:"You need to complete ".concat(r.surveyIds().length>1?"the surveys":"a survey"," provided by the ").concat(r.noun()," host."),ctasToComplete:null===(f=r.surveyIds())||void 0===f?void 0:f.map((function(e,t){return{disabled:!y.has(e),text:"Complete survey ".concat(r.surveyIds().length>1?t+1:""),onClick:function(){return(0,k.B6)(e,r.externalUrn().guid,a.GameBrand)}}}))}))}if(this.requiresFifaGGConnected()&&o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,heading:"Connect FIFA.GG",text:"You need to connect your FIFA.GG account.",done:this.hasFifaGGConnected(),ctasToComplete:[{text:"Connect",onClick:function(){return I.B.spawnPopup(t.otherLoginFifaGGData().AuthenticationType,(function(){d.cmOwnUser.setManageLoginsModel()}))}}]})),!(0,c.tQ)(r.restrictionPageFeatures())){var p,v=O(r.restrictionPageFeatures());try{for(v.s();!(p=v.n()).done;){switch(p.value){case h.Sf.Permission.User_Nasef_Email_Restriction_Feature:o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,heading:"NASEF",text:"You need to use a verified NASEF email on your Challengermode account.",done:!(null===(e=d.cmOwnUser.data())||void 0===e||!e.NasefEmailVerifiedDate),ctasToComplete:[{text:"Verify",onClick:function(){return S.tE.open({id:S.qq.User_VerifyNasefEmail,component:Promise.all([n.e(84992),n.e(77369)]).then(n.bind(n,77369))})}}]}))}}}catch(b){v.e(b)}finally{v.f()}}return!r.isReady(i)&&r.isInMaintenance()&&o.push(Y(Y({},this._feedbackStatus),{},{alertBrand:l.Z6.Warning,text:C.Yi.t("lobby.feedback.maintenance.text",{ns:"lobby",noun:r.noun()})})),o}},{key:"missingSubscriptionPerkIds",value:function(e){return this._subscriptionStart.missingPerkIds(e)}},{key:"missingSurveyResponses",value:function(e){return this._surveyStart.missingResponses(e)}},{key:"requiresFifaGGConnected",value:function(){var e;return null===(e=this._feedbackHost)||void 0===e?void 0:e.connectionRestrictions().some((function(e){return e.Type===h.oy.User.LoginProviderType.FifaGG}))}},{key:"hasFifaGGConnected",value:function(){var e;return null===(e=d.cmOwnUser.manageLogins())||void 0===e?void 0:e.CurrentLogins.some((function(e){return e.LoginProvider===h.oy.User.LoginProviderConstants.FifaGGLoginProviderName}))}},{key:"otherLoginFifaGGData",value:function(){var e;return null===(e=d.cmOwnUser.manageLogins())||void 0===e?void 0:e.OtherLogins.find((function(e){return e.AuthenticationType===h.oy.User.LoginProviderConstants.FifaGGLoginProviderName}))}},{key:"_ownParticipationText",value:function(e){return"".concat(this._ownTeamGenitive(e)," must confirm ").concat(this._ownTeamPossessivePronoun(e).toLowerCase()," participation")+" before the start of the ".concat(e.noun(),".")}},{key:"_ownTeamGenitive",value:function(e){return r._isSolo(e)?"You":"Your team"}},{key:"_ownMembersGenitive",value:function(e){return r._isSolo(e)?"You":"Your team members"}},{key:"_ownTeamActing",value:function(e){return r._isSolo(e)?"You are":"Your team is"}},{key:"_ownTeamPossessive",value:function(e){return r._isSolo(e)?"You have":"Your team has"}},{key:"_ownTeamPossessivePronoun",value:function(e){return r._isSolo(e)?"Your":"Their"}},{key:"_participantName",value:function(e,t){return r._isSolo(e)?t?"players":"player":t?"teams":"team"}}],[{key:"ownTeamActed",value:function(e){return r._isSolo(e)?"You were":"Your team was"}},{key:"_isSolo",value:function(e){return e.loaded()&&1===e.maximumTeamSize()}}]),r}(p.g),W="lobby_feedback";function L(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(0,T.wL)(null!==e&&void 0!==e&&e.externalUrn()?"".concat(W,":").concat(null===(n=e.externalUrn())||void 0===n?void 0:n.toString()):W,(function(){return(new R).init(e)}),t,r)}},65161:function(e,t,n){n.d(t,{B6:function(){return c},i_:function(){return d},s_:function(){return l}});var r=n(92137),i=n(87757),o=n.n(i),a=(n(66992),n(41539),n(88674),n(78783),n(33948),n(39743)),s=n(20555),u=n(84694);function c(e,t,r){a.tE.open({id:a.qq.Tournament_Survey,component:n.e(59478).then(n.bind(n,59478)),params:{surveyId:e,tournamentId:t,gameBrand:r},ignoreBackdrop:!0})}function d(e,t){return s.Z.to("/api/survey/survey_response/add").body({SurveyId:e,DataJson:JSON.stringify(t)}).call({useGlobalErrorHandling:!1,successMessage:"The survey was successfully submitted."})}function l(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.to("/api/survey/survey/export_responses").method("GET").query("surveyId",t).call();case 2:n=e.sent,(0,u.MF)(n,"survey_responses.csv","csv");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);